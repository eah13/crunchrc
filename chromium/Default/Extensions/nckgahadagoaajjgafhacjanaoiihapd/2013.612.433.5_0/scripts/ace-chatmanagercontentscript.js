(function(){var l,p=this,q=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b},r=function(a){return"string"==typeof a},t="closure_uid_"+(1E9*Math.random()>>>0),u=0,aa=function(a,b,c){return a.call.apply(a.bind,arguments)},ba=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}},v=function(a,
b,c){v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?aa:ba;return v.apply(null,arguments)},w=function(a,b){function c(){}c.prototype=b.prototype;a.k=b.prototype;a.prototype=new c};Function.prototype.bind=Function.prototype.bind||function(a,b){if(1<arguments.length){var c=Array.prototype.slice.call(arguments,1);c.unshift(this,a);return v.apply(null,c)}return v(this,a)};var x=Array.prototype,ca=x.indexOf?function(a,b,c){return x.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(r(a))return r(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1};var y,z,B,C,D=function(){return p.navigator?p.navigator.userAgent:null};C=B=z=y=!1;var E;if(E=D()){var da=p.navigator;y=0==E.indexOf("Opera");z=!y&&-1!=E.indexOf("MSIE");B=!y&&-1!=E.indexOf("WebKit");C=!y&&!B&&"Gecko"==da.product}var F=y,G=z,H=C,I=B,J=function(){var a=p.document;return a?a.documentMode:void 0},K;
e:{var L="",M;if(F&&p.opera)var N=p.opera.version,L="function"==typeof N?N():N;else if(H?M=/rv\:([^\);]+)(\)|;)/:G?M=/MSIE\s+([^\);]+)(\)|;)/:I&&(M=/WebKit\/(\S+)/),M)var ea=M.exec(D()),L=ea?ea[1]:"";if(G){var fa=J();if(fa>parseFloat(L)){K=String(fa);break e}}K=L}
var ga=K,ha={},O=function(a){var b;if(!(b=ha[a])){b=0;for(var c=String(ga).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",k=d[f]||"",h=RegExp("(\\d*)(\\D*)","g"),A=RegExp("(\\d*)(\\D*)","g");do{var m=h.exec(g)||["","",""],n=A.exec(k)||["","",""];if(0==m[0].length&&0==n[0].length)break;b=((0==m[1].length?0:parseInt(m[1],10))<(0==n[1].length?0:parseInt(n[1],10))?-1:(0==m[1].length?
0:parseInt(m[1],10))>(0==n[1].length?0:parseInt(n[1],10))?1:0)||((0==m[2].length)<(0==n[2].length)?-1:(0==m[2].length)>(0==n[2].length)?1:0)||(m[2]<n[2]?-1:m[2]>n[2]?1:0)}while(0==b)}b=ha[a]=0<=b}return b},ia=p.document,ja=ia&&G?J()||("CSS1Compat"==ia.compatMode?parseInt(ga,10):5):void 0;!H&&!G||G&&G&&9<=ja||H&&O("1.9.1");G&&O("9");var P=function(){};P.prototype.q=!1;P.prototype.o=function(){this.q||(this.q=!0,this.d())};P.prototype.d=function(){if(this.r)for(;this.r.length;)this.r.shift()()};var Q=function(a){Q[" "](a);return a};Q[" "]=function(){};var ka=!G||G&&9<=ja,la=G&&!O("9");!I||O("528");H&&O("1.9b")||G&&O("8")||F&&O("9.5")||I&&O("528");H&&!O("8")||G&&O("9");var R=function(a,b){this.type=a;this.currentTarget=this.target=b};l=R.prototype;l.d=function(){};l.o=function(){};l.j=!1;l.defaultPrevented=!1;l.preventDefault=function(){this.defaultPrevented=!0};var S=function(a,b){a&&ma(this,a,b)};w(S,R);l=S.prototype;l.target=null;l.relatedTarget=null;l.offsetX=0;l.offsetY=0;l.clientX=0;l.clientY=0;l.screenX=0;l.screenY=0;l.button=0;l.keyCode=0;l.charCode=0;l.ctrlKey=!1;l.altKey=!1;l.shiftKey=!1;l.metaKey=!1;l.m=null;
var ma=function(a,b,c){var d=a.type=b.type;R.call(a,d);a.target=b.target||b.srcElement;a.currentTarget=c;if(c=b.relatedTarget){if(H){var e;e:{try{Q(c.nodeName);e=!0;break e}catch(f){}e=!1}e||(c=null)}}else"mouseover"==d?c=b.fromElement:"mouseout"==d&&(c=b.toElement);a.relatedTarget=c;a.offsetX=I||void 0!==b.offsetX?b.offsetX:b.layerX;a.offsetY=I||void 0!==b.offsetY?b.offsetY:b.layerY;a.clientX=void 0!==b.clientX?b.clientX:b.pageX;a.clientY=void 0!==b.clientY?b.clientY:b.pageY;a.screenX=b.screenX||
0;a.screenY=b.screenY||0;a.button=b.button;a.keyCode=b.keyCode||0;a.charCode=b.charCode||("keypress"==d?b.keyCode:0);a.ctrlKey=b.ctrlKey;a.altKey=b.altKey;a.shiftKey=b.shiftKey;a.metaKey=b.metaKey;a.state=b.state;a.m=b;b.defaultPrevented&&a.preventDefault();delete a.j};S.prototype.preventDefault=function(){S.k.preventDefault.call(this);var a=this.m;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,la)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};
S.prototype.d=function(){};var na="closure_listenable_"+(1E6*Math.random()|0),oa=0;var pa=function(a,b,c,d,e,f){this.e=a;this.proxy=b;this.src=c;this.type=d;this.capture=!!e;this.g=f;this.key=++oa;this.removed=this.h=!1};var qa={},T={},U={},V={},W=function(a,b,c,d,e){if("array"==q(b)){for(var f=0;f<b.length;f++)W(a,b[f],c,d,e);return null}c=ra(c);if(a&&a[na])a=sa(a,b,c,d,e);else e:{if(!b)throw Error("Invalid event type");d=!!d;var g=T;b in g||(g[b]={a:0,b:0});g=g[b];d in g||(g[d]={a:0,b:0},g.a++);var g=g[d],f=a[t]||(a[t]=++u),k;g.b++;if(g[f]){k=g[f];for(var h=0;h<k.length;h++)if(g=k[h],g.e==c&&g.g==e){if(g.removed)break;k[h].h=!1;a=k[h];break e}}else k=g[f]=[],g.a++;h=ta();g=new pa(c,h,a,b,d,e);g.h=!1;h.src=a;h.e=
g;k.push(g);U[f]||(U[f]=[]);U[f].push(g);a.addEventListener?a.addEventListener(b,h,d):a.attachEvent(b in V?V[b]:V[b]="on"+b,h);a=qa[g.key]=g}return a},ta=function(){var a=ua,b=ka?function(c){return a.call(b.src,b.e,c)}:function(c){c=a.call(b.src,b.e,c);if(!c)return c};return b},wa=function(a){if("number"==typeof a||!a||a.removed)return!1;var b=a.src;if(b&&b[na])return b.u(a);var c=a.type,d=a.proxy,e=a.capture;b.removeEventListener?b.removeEventListener(c,d,e):b.detachEvent&&b.detachEvent(c in V?V[c]:
V[c]="on"+c,d);b=b[t]||(b[t]=++u);if(U[b]){var d=U[b],f=ca(d,a);0<=f&&x.splice.call(d,f,1);0==d.length&&delete U[b]}a.removed=!0;a.e=null;a.proxy=null;a.src=null;a.g=null;if(d=T[c][e][b])d.p=!0,va(c,e,b,d);delete qa[a.key];return!0},va=function(a,b,c,d){if(!d.f&&d.p){for(var e=0,f=0;e<d.length;e++)d[e].removed||(e!=f&&(d[f]=d[e]),f++);d.length=f;d.p=!1;0==f&&(delete T[a][b][c],T[a][b].a--,0==T[a][b].a&&(delete T[a][b],T[a].a--),0==T[a].a&&delete T[a])}},xa=function(a,b,c,d,e){var f=1;b=b[t]||(b[t]=
++u);if(a[b]){var g=--a.b,k=a[b];k.f?k.f++:k.f=1;try{for(var h=k.length,A=0;A<h;A++){var m=k[A];m&&!m.removed&&(f&=!1!==X(m,e))}}finally{a.b=Math.max(g,a.b),k.f--,va(c,d,b,k)}}return Boolean(f)},X=function(a,b){var c=a.e,d=a.g||a.src;a.h&&wa(a);return c.call(d,b)},ua=function(a,b){if(a.removed)return!0;var c=a.type,d=T;if(!(c in d))return!0;var d=d[c],e,f;if(!ka){var g;if(!(g=b))e:{g=["window","event"];for(var k=p;e=g.shift();)if(null!=k[e])k=k[e];else{g=null;break e}g=k}e=g;g=!0 in d;k=!1 in d;if(g){if(0>
e.keyCode||void 0!=e.returnValue)return!0;e:{var h=!1;if(0==e.keyCode)try{e.keyCode=-1;break e}catch(A){h=!0}if(h||void 0==e.returnValue)e.returnValue=!0}}h=new S;ma(h,e,this);e=!0;try{if(g){for(var m=[],n=h.currentTarget;n;n=n.parentNode)m.push(n);f=d[!0];f.b=f.a;for(var s=m.length-1;!h.j&&0<=s&&f.b;s--)h.currentTarget=m[s],e&=xa(f,m[s],c,!0,h);if(k)for(f=d[!1],f.b=f.a,s=0;!h.j&&s<m.length&&f.b;s++)h.currentTarget=m[s],e&=xa(f,m[s],c,!1,h)}else e=X(a,h)}finally{m&&(m.length=0)}return e}c=new S(b,
this);return e=X(a,c)},ya="__closure_events_fn_"+(1E9*Math.random()>>>0),ra=function(a){return"function"==q(a)?a:a[ya]||(a[ya]=function(b){return a.handleEvent(b)})};var Y=function(a){this.t=a;this.n={}};w(Y,P);var za=[],sa=function(a,b,c,d,e){"array"!=q(c)&&(za[0]=c,c=za);for(var f=0;f<c.length;f++){var g=W(b,c[f],d||a,e||!1,a.t||a);a.n[g.key]=g}return a};Y.prototype.removeAll=function(){var a=this.n,b;for(b in a)wa.call(void 0,a[b]);this.n={}};Y.prototype.d=function(){Y.k.d.call(this);this.removeAll()};Y.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};var Z=function(a){Y.call(this);this.l=a;this.i=v(this.s,this);Aa(this,"centralJidListener");sa(this,this.l,"callPhone centralJidSet getCentralJid onMoleClosed feedbackCentralRoster hav hasVoice hw mmm *mfo newVideoChat newVoiceChat oc ocbek ocfp oec onMoleOpened reloadCentralRoster showChat showChatBG startReplyByChat startVideo startVoice".split(" "),this);chrome.extension.sendRequest({msg:"onContentPageLoaded"})},$;w(Z,Y);Z.prototype.d=function(){Z.k.d.call(this);Ba(this);delete this.i;delete this.l};
var Da=function(){var a=(r("roster_comm_link")?document.getElementById("roster_comm_link"):"roster_comm_link")||(r("mainElement")?document.getElementById("mainElement"):"mainElement");a&&($=new Z(a),W(window,"unload",Ca))},Ca=function(){var a=$;a&&"function"==typeof a.o&&a.o();$=null};
Z.prototype.handleEvent=function(a){var b=a.m;a=b.type;switch(a){case "newVideoChat":a="startVideo";break;case "newVoiceChat":a="startVoice"}switch(a){case "callPhone":case "getCentralJid":case "newVideoChat":case "newVoiceChat":case "oc":case "ocbek":case "ocfp":case "oec":case "showChat":case "showChatBG":case "startReplyByChat":case "startVideo":case "startVoice":this.c&&"centralJidListener"==this.c.name&&(b=r(b.data)?{jid:b.data}:b.data,b.msg=a,chrome.extension.sendRequest(b));break;case "mmm":b=
r(b.data.jid)?JSON.parse(b.data.jid):[];chrome.extension.sendRequest({msg:a,params:b});break;case "onMoleOpened":case "onMoleClosed":case "*mfo":case "reloadCentralRoster":case "feedbackCentralRoster":chrome.extension.sendRequest({msg:a,jid:b.data});break;case "hasVoice":chrome.extension.sendRequest({msg:a,voice:!!b.data});break;case "hw":chrome.extension.sendRequest({msg:a,wabel:!!b.data});break;case "hav":chrome.extension.sendRequest({msg:a,av:!!b.data});break;case "centralJidSet":Aa(this,"centralJidBroadcaster"),
this.c.postMessage({jid:b.data})}};Z.prototype.s=function(a){var b=a.eventType;delete a.eventType;a=void 0!==a.ttl||void 0!==a.rbcData?a:a.jid;var c=document.createEvent("MessageEvent");c.initMessageEvent(b,!0,!0,a);this.l.dispatchEvent(c)};var Aa=function(a,b){Ba(a);a.c=chrome.extension.connect({name:b});a.c.onMessage.addListener(a.i)},Ba=function(a){a.c&&(a.c.onMessage.removeListener(a.i),a.c.disconnect(),delete a.c)};
"complete"===document.readyState||"interactive"===document.readyState?Da():W(window,"DOMContentLoaded",Da);})()
