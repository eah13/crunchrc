(function(){var h,n=this,aa=function(a,b){var c=a.split("."),d=n;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var f;c.length&&(f=c.shift());)c.length||void 0===b?d=d[f]?d[f]:d[f]={}:d[f]=b},q=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&
!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a.call)return"object";return b},r=function(a){return"array"==q(a)},ba=function(a){var b=q(a);return"array"==b||"object"==b&&"number"==typeof a.length},s=function(a){return"string"==typeof a},ca=function(a){var b=typeof a;return"object"==b&&null!=
a||"function"==b},t=function(a){return a[da]||(a[da]=++ea)},da="closure_uid_"+(1E9*Math.random()>>>0),ea=0,fa=function(a,b,c){return a.call.apply(a.bind,arguments)},ga=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}},u=function(a,b,c){u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?
fa:ga;return u.apply(null,arguments)},ha=Date.now||function(){return+new Date},v=function(a,b){function c(){}c.prototype=b.prototype;a.A=b.prototype;a.prototype=new c};Function.prototype.bind=Function.prototype.bind||function(a,b){if(1<arguments.length){var c=Array.prototype.slice.call(arguments,1);c.unshift(this,a);return u.apply(null,c)}return u(this,a)};var na=function(a){if(!ia.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(ja,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(ka,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(la,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(ma,"&quot;"));return a},ja=/&/g,ka=/</g,la=/>/g,ma=/\"/g,ia=/[&<>\"]/;var oa=function(a,b){for(var c=[],d=0;d<arguments.length;d++)c.push(arguments[d]||"");return c.join("_;_")};var w=function(a,b){this.V=a||"e";this.T=null!=a&&"p"==a?"e":"p";this.u=this.W=null;this.da=b||"u";this.I=this.U=null;this.K=[]};w.prototype.message=function(){var a={};a.i=this.I;a.m=this.K;a.r=this.da;a.o=this.U;a.s=this.u;a.st=this.T;a.d=this.W;a.dt=this.V;return a};aa("ace.base.Message.prototype.message",w.prototype.message);
w.prototype.parse=function(a){for(var b in a)switch(b){case "r":this.da=a[b];break;case "i":this.I=a[b];break;case "m":this.K=a[b];break;case "o":this.U=a[b];break;case "s":this.u=a[b];break;case "d":this.W=a[b];break;case "st":this.T=a[b];break;case "dt":this.V=a[b]}return this};var pa=function(a,b){null!=b&&(a.u=b,a.T="p")};w.prototype.target=function(){return this.W};w.prototype.J=function(){return this.V};w.prototype.content=function(){return this.K};var y=Array.prototype,qa=y.indexOf?function(a,b,c){return y.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(s(a))return s(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ra=y.forEach?function(a,b,c){y.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=s(a)?a.split(""):a,e=0;e<d;e++)e in f&&b.call(c,f[e],e,a)},sa=function(a,b){var c=qa(a,b),d;(d=0<=c)&&y.splice.call(a,c,1);return d},ta=function(a){var b=a.length;if(0<
b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]},ua=function(a,b,c){return 2>=arguments.length?y.slice.call(a,b):y.slice.call(a,b,c)};var va=function(a){try{this.u=window[a]}catch(b){this.u=null}},z=new va("sessionStorage");va.prototype.set=function(a,b){if(this.u){var c={};c.data=b;c.timestamp=ha();c=JSON.stringify(c);try{this.u.setItem(a,c)}catch(d){}}};var wa=function(a,b){for(var c in a)b.call(void 0,a[c],c,a)},xa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),ya=function(a,b){for(var c,d,f=1;f<arguments.length;f++){d=arguments[f];for(c in d)a[c]=d[c];for(var e=0;e<xa.length;e++)c=xa[e],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var za=function(a){za[" "](a);return a};za[" "]=function(){};var A,Aa,B,Ba,Ca=function(){return n.navigator?n.navigator.userAgent:null};Ba=B=Aa=A=!1;var C;if(C=Ca()){var Da=n.navigator;A=0==C.indexOf("Opera");Aa=!A&&-1!=C.indexOf("MSIE");B=!A&&-1!=C.indexOf("WebKit");Ba=!A&&!B&&"Gecko"==Da.product}var Ea=A,D=Aa,E=Ba,F=B,Fa=function(){var a=n.document;return a?a.documentMode:void 0},Ga;
t:{var Ha="",G;if(Ea&&n.opera)var Ia=n.opera.version,Ha="function"==typeof Ia?Ia():Ia;else if(E?G=/rv\:([^\);]+)(\)|;)/:D?G=/MSIE\s+([^\);]+)(\)|;)/:F&&(G=/WebKit\/(\S+)/),G)var Ja=G.exec(Ca()),Ha=Ja?Ja[1]:"";if(D){var Ka=Fa();if(Ka>parseFloat(Ha)){Ga=String(Ka);break t}}Ga=Ha}
var La=Ga,Ma={},I=function(a){var b;if(!(b=Ma[a])){b=0;for(var c=String(La).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=Math.max(c.length,d.length),e=0;0==b&&e<f;e++){var g=c[e]||"",k=d[e]||"",l=RegExp("(\\d*)(\\D*)","g"),H=RegExp("(\\d*)(\\D*)","g");do{var m=l.exec(g)||["","",""],p=H.exec(k)||["","",""];if(0==m[0].length&&0==p[0].length)break;b=((0==m[1].length?0:parseInt(m[1],10))<(0==p[1].length?0:parseInt(p[1],10))?-1:(0==m[1].length?
0:parseInt(m[1],10))>(0==p[1].length?0:parseInt(p[1],10))?1:0)||((0==m[2].length)<(0==p[2].length)?-1:(0==m[2].length)>(0==p[2].length)?1:0)||(m[2]<p[2]?-1:m[2]>p[2]?1:0)}while(0==b)}b=Ma[a]=0<=b}return b},Na=n.document,Oa=Na&&D?Fa()||("CSS1Compat"==Na.compatMode?parseInt(La,10):5):void 0;var Pa=!D||D&&9<=Oa,Qa=D&&!I("9");!F||I("528");E&&I("1.9b")||D&&I("8")||Ea&&I("9.5")||F&&I("528");E&&!I("8")||D&&I("9");var J=function(){};J.prototype.ha=!1;J.prototype.G=function(){this.ha||(this.ha=!0,this.c())};J.prototype.c=function(){if(this.ia)for(;this.ia.length;)this.ia.shift()()};var K=function(a){a&&"function"==typeof a.G&&a.G()};var L=function(a,b){this.type=a;this.currentTarget=this.target=b};h=L.prototype;h.c=function(){};h.G=function(){};h.v=!1;h.defaultPrevented=!1;h.fa=!0;h.preventDefault=function(){this.defaultPrevented=!0;this.fa=!1};var M=function(a,b){a&&Ra(this,a,b)};v(M,L);h=M.prototype;h.target=null;h.relatedTarget=null;h.offsetX=0;h.offsetY=0;h.clientX=0;h.clientY=0;h.screenX=0;h.screenY=0;h.button=0;h.keyCode=0;h.charCode=0;h.ctrlKey=!1;h.altKey=!1;h.shiftKey=!1;h.metaKey=!1;h.X=null;
var Ra=function(a,b,c){var d=a.type=b.type;L.call(a,d);a.target=b.target||b.srcElement;a.currentTarget=c;if(c=b.relatedTarget){if(E){var f;t:{try{za(c.nodeName);f=!0;break t}catch(e){}f=!1}f||(c=null)}}else"mouseover"==d?c=b.fromElement:"mouseout"==d&&(c=b.toElement);a.relatedTarget=c;a.offsetX=F||void 0!==b.offsetX?b.offsetX:b.layerX;a.offsetY=F||void 0!==b.offsetY?b.offsetY:b.layerY;a.clientX=void 0!==b.clientX?b.clientX:b.pageX;a.clientY=void 0!==b.clientY?b.clientY:b.pageY;a.screenX=b.screenX||
0;a.screenY=b.screenY||0;a.button=b.button;a.keyCode=b.keyCode||0;a.charCode=b.charCode||("keypress"==d?b.keyCode:0);a.ctrlKey=b.ctrlKey;a.altKey=b.altKey;a.shiftKey=b.shiftKey;a.metaKey=b.metaKey;a.state=b.state;a.X=b;b.defaultPrevented&&a.preventDefault();delete a.v};M.prototype.preventDefault=function(){M.A.preventDefault.call(this);var a=this.X;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Qa)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};
M.prototype.c=function(){};var N="closure_listenable_"+(1E6*Math.random()|0),Sa=0;var Ta=function(a,b,c,d,f,e){this.h=a;this.proxy=b;this.src=c;this.type=d;this.capture=!!f;this.t=e;this.key=++Sa;this.removed=this.B=!1};var O={},P={},Q={},R={},S=function(a,b,c,d,f){if(r(b)){for(var e=0;e<b.length;e++)S(a,b[e],c,d,f);return null}c=Ua(c);if(a&&a[N])a=a.p(b,c,d,f);else t:{if(!b)throw Error("Invalid event type");d=!!d;var g=P;b in g||(g[b]={l:0,n:0});g=g[b];d in g||(g[d]={l:0,n:0},g.l++);var g=g[d],e=t(a),k;g.n++;if(g[e]){k=g[e];for(var l=0;l<k.length;l++)if(g=k[l],g.h==c&&g.t==f){if(g.removed)break;k[l].B=!1;a=k[l];break t}}else k=g[e]=[],g.l++;l=Va();g=new Ta(c,l,a,b,d,f);g.B=!1;l.src=a;l.h=g;k.push(g);Q[e]||(Q[e]=
[]);Q[e].push(g);a.addEventListener?a.addEventListener(b,l,d):a.attachEvent(b in R?R[b]:R[b]="on"+b,l);a=O[g.key]=g}return a},Va=function(){var a=Wa,b=Pa?function(c){return a.call(b.src,b.h,c)}:function(c){c=a.call(b.src,b.h,c);if(!c)return c};return b},T=function(a,b,c,d,f){if(r(b))for(var e=0;e<b.length;e++)T(a,b[e],c,d,f);else if(c=Ua(c),a&&a[N])a.C(b,c,d,f);else if(d=!!d,a=Xa(a,b,d))for(e=0;e<a.length;e++)if(a[e].h==c&&a[e].capture==d&&a[e].t==f){Ya(a[e]);break}},Ya=function(a){if("number"==typeof a||
!a||a.removed)return!1;var b=a.src;if(b&&b[N])return Za(b,a);var c=a.type,d=a.proxy,f=a.capture;b.removeEventListener?b.removeEventListener(c,d,f):b.detachEvent&&b.detachEvent(c in R?R[c]:R[c]="on"+c,d);b=t(b);Q[b]&&(d=Q[b],sa(d,a),0==d.length&&delete Q[b]);a.removed=!0;a.h=null;a.proxy=null;a.src=null;a.t=null;if(d=P[c][f][b])d.ga=!0,$a(c,f,b,d);delete O[a.key];return!0},$a=function(a,b,c,d){if(!d.M&&d.ga){for(var f=0,e=0;f<d.length;f++)d[f].removed||(f!=e&&(d[e]=d[f]),e++);d.length=e;d.ga=!1;0==
e&&(delete P[a][b][c],P[a][b].l--,0==P[a][b].l&&(delete P[a][b],P[a].l--),0==P[a].l&&delete P[a])}},Xa=function(a,b,c){var d=P;return b in d&&(d=d[b],c in d&&(d=d[c],a=t(a),d[a]))?d[a]:null},bb=function(a,b,c,d,f){var e=1;b=t(b);if(a[b]){var g=--a.n,k=a[b];k.M?k.M++:k.M=1;try{for(var l=k.length,H=0;H<l;H++){var m=k[H];m&&!m.removed&&(e&=!1!==ab(m,f))}}finally{a.n=Math.max(g,a.n),k.M--,$a(c,d,b,k)}}return Boolean(e)},ab=function(a,b){var c=a.h,d=a.t||a.src;a.B&&Ya(a);return c.call(d,b)},Wa=function(a,
b){if(a.removed)return!0;var c=a.type,d=P;if(!(c in d))return!0;var d=d[c],f,e;if(!Pa){var g;if(!(g=b))t:{g=["window","event"];for(var k=n;f=g.shift();)if(null!=k[f])k=k[f];else{g=null;break t}g=k}f=g;g=!0 in d;k=!1 in d;if(g){if(0>f.keyCode||void 0!=f.returnValue)return!0;t:{var l=!1;if(0==f.keyCode)try{f.keyCode=-1;break t}catch(H){l=!0}if(l||void 0==f.returnValue)f.returnValue=!0}}l=new M;Ra(l,f,this);f=!0;try{if(g){for(var m=[],p=l.currentTarget;p;p=p.parentNode)m.push(p);e=d[!0];e.n=e.l;for(var x=
m.length-1;!l.v&&0<=x&&e.n;x--)l.currentTarget=m[x],f&=bb(e,m[x],c,!0,l);if(k)for(e=d[!1],e.n=e.l,x=0;!l.v&&x<m.length&&e.n;x++)l.currentTarget=m[x],f&=bb(e,m[x],c,!1,l)}else f=ab(a,l)}finally{m&&(m.length=0)}return f}c=new M(b,this);return f=ab(a,c)},cb="__closure_events_fn_"+(1E9*Math.random()>>>0),Ua=function(a){return"function"==q(a)?a:a[cb]||(a[cb]=function(b){return a.handleEvent(b)})};var db=!D||D&&9<=Oa;!E&&!D||D&&D&&9<=Oa||E&&I("1.9.1");D&&I("9");var eb=function(a,b){var c;c=a.className;c=s(c)&&c.match(/\S+/g)||[];for(var d=ua(arguments,1),f=c.length+d.length,e=c,g=0;g<d.length;g++)0<=qa(e,d[g])||e.push(d[g]);a.className=c.join(" ");return c.length==f};var U=function(a){return s(a)?document.getElementById(a):a},gb=function(a,b){wa(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in fb?a.setAttribute(fb[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})},fb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",
width:"width"},ib=function(a,b,c){var d=arguments,f=document,e=d[0],g=d[1];if(!db&&g&&(g.name||g.type)){e=["<",e];g.name&&e.push(' name="',na(g.name),'"');if(g.type){e.push(' type="',na(g.type),'"');var k={};ya(k,g);delete k.type;g=k}e.push(">");e=e.join("")}e=f.createElement(e);g&&(s(g)?e.className=g:r(g)?eb.apply(null,[e].concat(g)):gb(e,g));2<d.length&&hb(f,e,d);return e},hb=function(a,b,c){function d(c){c&&b.appendChild(s(c)?a.createTextNode(c):c)}for(var f=2;f<c.length;f++){var e=c[f];if(!ba(e)||
ca(e)&&0<e.nodeType)d(e);else{var g;t:{if(e&&"number"==typeof e.length){if(ca(e)){g="function"==typeof e.item||"string"==typeof e.item;break t}if("function"==q(e)){g="function"==typeof e.item;break t}}g=!1}ra(g?ta(e):e,d)}}};var V=function(a){this.ea=a;this.L={}};v(V,J);var jb=[];h=V.prototype;h.p=function(a,b,c,d,f){r(b)||(jb[0]=b,b=jb);for(var e=0;e<b.length;e++){var g=S(a,b[e],c||this,d||!1,f||this.ea||this);this.L[g.key]=g}return this};
h.C=function(a,b,c,d,f){if(r(b))for(var e=0;e<b.length;e++)this.C(a,b[e],c,d,f);else{t:if(f=f||this.ea||this,d=!!d,c=Ua(c||this),a&&a[N])a=a.g[b],b=-1,a&&(b=kb(a,c,d,f)),f=-1<b?a[b]:null;else{if(a=Xa(a,b,d))for(b=0;b<a.length;b++)if(!a[b].removed&&a[b].h==c&&a[b].capture==d&&a[b].t==f){f=a[b];break t}f=null}f&&(Ya(f),delete this.L[f.key])}return this};h.removeAll=function(){wa(this.L,Ya);this.L={}};h.c=function(){V.A.c.call(this);this.removeAll()};
h.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};var W=function(a){this.ja=a;this.f="";this.j=!1;this.H=this.b=this.e=null;this.k=new V(this)};v(W,J);h=W.prototype;h.c=function(){W.A.c.call(this);this.disconnect();K(this.k)};h.F=function(){return this.f};h.D=function(){return this.j};h.write=function(a){if(!this.D()||""!=this.e.value)return!1;a=JSON.stringify(a);this.e.maxLength=a.length+1;this.e.value=a;this.e.dispatchEvent(this.H);return!0};
h.connect=function(a,b){this.N=a;this.H=document.createEvent("Event");this.H.initEvent("ecRead",!0,!0);switch(this.ja){case 1:this.Q();break;case 2:this.f=oa(b||"random",""+(new Date).getTime());this.b=lb(this.f);this.e=lb("ecHub");this.e.value=""+this.f;this.k.p(this.e,"ecConnect",this.ka);this.k.p(this.b,"ecDisconnect",this.aa);var c=document.createEvent("Event");c.initEvent("ecReadyConnect",!0,!0);document.body.dispatchEvent(c)}};
h.Q=function(){if(this.b=U("ecHub")){this.k.C(window,"ecReadyConnect",this.Q,!0,this);mb(this);this.f=""+this.b.value;this.e=U(this.f);this.e.value="";this.b.value="";this.j=!0;this.k.p(this.b,"ecDisconnect",this.disconnect);var a=document.createEvent("Event");a.initEvent("ecConnect",!0,!0);this.b.dispatchEvent(a);this.write({connected:!0});this.N.R(this.f)}else this.k.p(window,"ecReadyConnect",this.Q)};
h.disconnect=function(){if(this.e&&this.e.parentNode){this.k.C(this.b,"ecDisconnect",this.aa);var a=document.createEvent("Event");a.initEvent("ecDisconnect",!0,!0);this.write({disconnected:!0});this.e.dispatchEvent(a)}this.j=!1;this.k.removeAll();(a=this.e)&&a.parentNode&&a.parentNode.removeChild(a);(a=this.b)&&a.parentNode&&a.parentNode.removeChild(a);delete this.b;delete this.e;delete this.H;delete this.N};
var lb=function(a){var b=U(a);b||(b=ib("input",{id:a,name:a,type:"hidden",value:""}),document.body.appendChild(b));return b};W.prototype.ka=function(){mb(this);this.j=!0};W.prototype.aa=function(){this.disconnect()};var mb=function(a){a.k.p(a.b,"ecRead",a.na)};W.prototype.na=function(){var a=this.N,b;this.D()?(b=""+this.b.value,this.b.maxLength=0,this.b.value="",b=JSON.parse(b)):b=null;b=(new w).parse(b);null!=b&&"c"!=b.J()&&a.a.sendMessage(b)};var X=function(){this.g={};this.oa=this};v(X,J);X.prototype[N]=!0;h=X.prototype;h.Y=null;h.addEventListener=function(a,b,c,d){S(this,a,b,c,d)};h.removeEventListener=function(a,b,c,d){T(this,a,b,c,d)};
h.dispatchEvent=function(a){var b,c=this.Y;if(c){b=[];for(var d=1;c;c=c.Y)b.push(c),++d}c=this.oa;d=a.type||a;if(s(a))a=new L(a,c);else if(a instanceof L)a.target=a.target||c;else{var f=a;a=new L(d,c);ya(a,f)}var f=!0,e;if(b)for(var g=b.length-1;!a.v&&0<=g;g--)e=a.currentTarget=b[g],f=nb(e,d,!0,a)&&f;a.v||(e=a.currentTarget=c,f=nb(e,d,!0,a)&&f,a.v||(f=nb(e,d,!1,a)&&f));if(b)for(g=0;!a.v&&g<b.length;g++)e=a.currentTarget=b[g],f=nb(e,d,!1,a)&&f;return f};
h.c=function(){X.A.c.call(this);var a=0,b;for(b in this.g){for(var c=this.g[b],d=0;d<c.length;d++)++a,delete O[c[d].key],c[d].removed=!0;c.length=0}this.Y=null};h.p=function(a,b,c,d){var f=this.g[a]||(this.g[a]=[]),e=kb(f,b,c,d);-1<e?(a=f[e],a.B=!1):(a=new Ta(b,null,this,a,!!c,d),a.B=!1,f.push(a));return a};h.C=function(a,b,c,d){if(!(a in this.g))return!1;a=this.g[a];b=kb(a,b,c,d);return-1<b?(c=a[b],delete O[c.key],c.removed=!0,1==y.splice.call(a,b,1).length):!1};
var Za=function(a,b){var c=b.type;if(!(c in a.g))return!1;if(c=sa(a.g[c],b))delete O[b.key],b.removed=!0;return c},nb=function(a,b,c,d){if(!(b in a.g))return!0;var f=!0;b=ta(a.g[b]);for(var e=0;e<b.length;++e){var g=b[e];if(g&&!g.removed&&g.capture==c){var k=g.h,l=g.t||g.src;g.B&&Za(a,g);f=!1!==k.call(l,d)&&f}}return f&&!1!=d.fa},kb=function(a,b,c,d){for(var f=0;f<a.length;++f){var e=a[f];if(e.h==b&&e.capture==!!c&&e.t==d)return f}return-1};var ob=function(a){X.call(this);this.f=a?a:null;this.a=null;this.j=!1;this.w=[];this.O=u(this.la,this);this.P=u(this.terminate,this);this.$=null};v(ob,X);var pb=function(a){L.call(this,"message");this.message=a};v(pb,L);pb.prototype.c=function(){delete this.message};h=ob.prototype;h.c=function(){ob.A.c.call(this);n.clearTimeout(this.$);this.terminate(!0);for(var a=0;a<this.w.length;++a)K(this.w[a]);delete this.w;delete this.O;delete this.P};h.F=function(){return this.f};h.D=function(){return this.j};
h.sendMessage=function(a){if(null==a||null==a.message)return!1;pa(a,this.F());this.a&&this.j?this.a.postMessage(a.message()):this.w.push(a);return!0};h.connect=function(){if(null==this.f)return!1;try{if(this.a=chrome.extension.connect({name:this.f}),null==this.a)return!1}catch(a){return!1}this.j=!0;this.a.onMessage.addListener(this.O);this.a.onDisconnect.addListener(this.P);for(var b=this.w.shift();null!=b;)pa(b,this.F()),this.a.postMessage(b.message()),b=this.w.shift();return!0};h.la=function(a){this.dispatchEvent(new pb((new w).parse(a)))};
h.terminate=function(a){this.a&&(this.a.onMessage.removeListener(this.O),this.a.onDisconnect.removeListener(this.P),this.a.disconnect(),delete this.a);this.j=!1;if(!a){a=this.ma;if("function"==q(a))this&&(a=u(a,this));else if(a&&"function"==typeof a.handleEvent)a=u(a.handleEvent,a);else throw Error("Invalid listener argument");this.$=n.setTimeout(a,5E3)}};h.ma=function(){this.connect()?this.dispatchEvent({type:"reconnected"}):this.dispatchEvent({type:"disconnected"})};var Y=function(){this.q=new W(1);this.a=new ob;S(this.a,"disconnected",this.ba,!0,this);S(this.a,"message",this.ca,!0,this);S(window,"unload",this.G,!0,this);z.set("hasExtension",!0)};v(Y,J);aa("ace.base.PageClient",Y);Y.prototype.c=function(){T(this.a,"disconnected",this.ba,!0,this);T(this.a,"message",this.ca,!0,this);T(window,"unload",this.G,!0,this);K(this.q);K(this.a);delete this.q;delete this.a};Y.prototype.connect=function(a){this.q.connect(this);a&&this.R(a)};Y.prototype.connect=Y.prototype.connect;
Y.prototype.R=function(a){this.a.D()||(this.a.f=a,this.a.connect()||this.q.disconnect());return this.a.F()};Y.prototype.handleConnection=Y.prototype.R;
Y.prototype.ca=function(a){a=a.message;var b;if(b=null!=a)if(b=null!=a.target)b=null!=a.target()&&null!=a.J&&null!=a.message;if(b&&a.target()==this.a.F())if("p"==a.J()&&this.q.D())this.q.write(a.message());else if("c"==a.J()&&"extensionInfo"==a.I){a=a.content();for(var c in a)switch(c){case "hasExtension":z.set("hasExtension",a[c]);break;case "chatNoticificationEnabled":z.set("chatNoticificationEnabled",a[c]);break;case "versionNum":z.set("versionNum",a[c]);break;case "UserId":z.set("UserId",a[c])}}};
Y.prototype.ba=function(){this.q.disconnect()};if(0<=window.location.href.indexOf("rostercontainer.html")){var qb=document.getElementById("signInBox");if(qb&&"none"!=qb.style.display){var Z=new w;pa(Z,"");var rb=[3];Z.K="object"==typeof rb?rb:[rb];Z.U="desktopManager";Z.I="changeDesktop";chrome.extension.sendRequest(Z.message())}}(new Y).connect();var $=function(a){V.call(this);this.Z=a;this.S=u(this.pa,this);sb(this,"centralJidListener");this.p(this.Z,"callPhone centralJidSet getCentralJid onMoleClosed feedbackCentralRoster hav hasVoice hw mmm *mfo newVideoChat newVoiceChat oc ocbek ocfp oec onMoleOpened reloadCentralRoster showChat showChatBG startReplyByChat startVideo startVoice".split(" "),this);chrome.extension.sendRequest({msg:"onContentPageLoaded"})},tb;v($,V);$.prototype.c=function(){$.A.c.call(this);ub(this);delete this.S;delete this.Z};
var wb=function(){var a=U("roster_comm_link")||U("mainElement");a&&(tb=new $(a),S(window,"unload",vb))},vb=function(){K(tb);tb=null};
$.prototype.handleEvent=function(a){var b=a.X;a=b.type;switch(a){case "newVideoChat":a="startVideo";break;case "newVoiceChat":a="startVoice"}switch(a){case "callPhone":case "getCentralJid":case "newVideoChat":case "newVoiceChat":case "oc":case "ocbek":case "ocfp":case "oec":case "showChat":case "showChatBG":case "startReplyByChat":case "startVideo":case "startVoice":this.a&&"centralJidListener"==this.a.name&&(b=s(b.data)?{jid:b.data}:b.data,b.msg=a,chrome.extension.sendRequest(b));break;case "mmm":b=
s(b.data.jid)?JSON.parse(b.data.jid):[];chrome.extension.sendRequest({msg:a,params:b});break;case "onMoleOpened":case "onMoleClosed":case "*mfo":case "reloadCentralRoster":case "feedbackCentralRoster":chrome.extension.sendRequest({msg:a,jid:b.data});break;case "hasVoice":chrome.extension.sendRequest({msg:a,voice:!!b.data});break;case "hw":chrome.extension.sendRequest({msg:a,wabel:!!b.data});break;case "hav":chrome.extension.sendRequest({msg:a,av:!!b.data});break;case "centralJidSet":sb(this,"centralJidBroadcaster"),
this.a.postMessage({jid:b.data})}};$.prototype.pa=function(a){var b=a.eventType;delete a.eventType;a=void 0!==a.ttl||void 0!==a.rbcData?a:a.jid;var c=document.createEvent("MessageEvent");c.initMessageEvent(b,!0,!0,a);this.Z.dispatchEvent(c)};var sb=function(a,b){ub(a);a.a=chrome.extension.connect({name:b});a.a.onMessage.addListener(a.S)},ub=function(a){a.a&&(a.a.onMessage.removeListener(a.S),a.a.disconnect(),delete a.a)};
"complete"===document.readyState||"interactive"===document.readyState?wb():S(window,"DOMContentLoaded",wb);})()
